{"ast":null,"code":"import'./App.css';import'bootstrap';import NavBar from'./components/NavBar/NavBar';import ItemListContainer from'./components/ItemListContainer/ItemListContainer';import ItemDetailContainer from'./components/ItemDetailContainer/ItemDetailContainer';import{BrowserRouter as Router,Routes,Route,Link,useNavigate}from'react-router-dom';import React,{useEffect,useState}from'react';import{Contact}from'./views/Contact';import{Cart}from'./views/Cart';import CheckOut from'./views/CheckOut';import SupplierList from'./components/SupplierList/SupplierList';import SalesReport from'./components/SalesReport/SalesReport';import PurchaseReport from'./components/PurchaseReport/PurchaseReport';import ProductList from'./components/ProductList/ProductList';import ClienteList from'./components/ClientesList/ClientesList';import Auth from'./components/Login/Auth';import{AuthProvider,useAuth}from'./context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[userRole,setUserRole]=useState(null);useEffect(()=>{if(userRole){console.log(\"Rol del usuario en el frontend:\",userRole);}},[userRole]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(AuthProvider,{children:[/*#__PURE__*/_jsx(NavBar,{userRole:userRole}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ItemListContainer,{greeting:\"Bienvenidos\"})}),/*#__PURE__*/_jsx(Route,{path:\"/category/:categoryId\",element:/*#__PURE__*/_jsx(ItemListContainer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/products/:itemId\",element:/*#__PURE__*/_jsx(ItemDetailContainer,{})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(CheckOut,{})}),/*#__PURE__*/_jsx(Route,{path:\"/auth/login\",element:/*#__PURE__*/_jsx(Auth,{setUserRole:setUserRole})}),/*#__PURE__*/_jsx(Route,{path:\"/clientes\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,requiredRole:\"admin\",redirectPath:\"/auth/login\",children:/*#__PURE__*/_jsx(ClienteList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/suppliers\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,requiredRole:\"admin\",redirectPath:\"/auth/login\",children:/*#__PURE__*/_jsx(SupplierList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/products\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,requiredRole:\"admin\",redirectPath:\"/auth/login\",children:/*#__PURE__*/_jsx(ProductList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/sales-report\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,requiredRole:\"admin\",redirectPath:\"/auth/login\",children:/*#__PURE__*/_jsx(SalesReport,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/purchase-report\",element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,requiredRole:\"admin\",redirectPath:\"/auth/login\",children:/*#__PURE__*/_jsx(PurchaseReport,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(\"h1\",{children:\"404 NOT FOUND\"})})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"my-xxl-5 justify-content-end\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",children:\"\\uD83C\\uDFE0 HOME\"})})})]});}const ProtectedRoute=_ref=>{let{userRole,requiredRole=\"user\",redirectPath=\"/\",children}=_ref;const navigate=useNavigate();useEffect(()=>{console.log(\"Verificando rol del usuario en ProtectedRoute:\",userRole);const token=localStorage.getItem('firebaseToken');if(!token||userRole&&userRole!==requiredRole){console.log(\"Redirigiendo a:\",redirectPath);navigate(redirectPath);}},[navigate,redirectPath,userRole,requiredRole]);return children;};export default App;","map":{"version":3,"names":["NavBar","ItemListContainer","ItemDetailContainer","BrowserRouter","Router","Routes","Route","Link","useNavigate","React","useEffect","useState","Contact","Cart","CheckOut","SupplierList","SalesReport","PurchaseReport","ProductList","ClienteList","Auth","AuthProvider","useAuth","jsx","_jsx","jsxs","_jsxs","App","userRole","setUserRole","console","log","className","children","path","element","greeting","ProtectedRoute","requiredRole","redirectPath","to","_ref","navigate","token","localStorage","getItem"],"sources":["C:/Users/guill/OneDrive/Documents/UADE/TP/equipo1-ecommerce/equipo1-ecommerce/src/App.jsx"],"sourcesContent":["import './App.css';\r\nimport 'bootstrap';\r\nimport NavBar from './components/NavBar/NavBar';\r\nimport ItemListContainer from './components/ItemListContainer/ItemListContainer';\r\nimport ItemDetailContainer from './components/ItemDetailContainer/ItemDetailContainer';\r\nimport { BrowserRouter as Router, Routes, Route, Link, useNavigate } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Contact } from './views/Contact';\r\nimport { Cart } from './views/Cart';\r\nimport CheckOut from './views/CheckOut';\r\nimport SupplierList from './components/SupplierList/SupplierList';\r\nimport SalesReport from './components/SalesReport/SalesReport';\r\nimport PurchaseReport from './components/PurchaseReport/PurchaseReport';\r\nimport ProductList from './components/ProductList/ProductList';\r\nimport ClienteList from './components/ClientesList/ClientesList';\r\nimport Auth from './components/Login/Auth';\r\nimport { AuthProvider, useAuth } from './context/AuthContext';\r\n\r\nfunction App() {\r\n  const [userRole, setUserRole] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (userRole) {\r\n      console.log(\"Rol del usuario en el frontend:\", userRole);\r\n    }\r\n  }, [userRole]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <AuthProvider>\r\n        <NavBar userRole={userRole} />\r\n        <Routes>\r\n          <Route path=\"/\" element={<ItemListContainer greeting={\"Bienvenidos\"} />} />\r\n          <Route path=\"/category/:categoryId\" element={<ItemListContainer />} />\r\n          <Route path=\"/products/:itemId\" element={<ItemDetailContainer />} />\r\n          <Route path=\"/contact\" element={<Contact />} />\r\n          <Route path=\"/cart\" element={<Cart />} />\r\n          <Route path=\"/checkout\" element={<CheckOut />} />\r\n          <Route path=\"/auth/login\" element={<Auth setUserRole={setUserRole} />} />\r\n\r\n          {/* Rutas protegidas */}\r\n          <Route path=\"/clientes\" element={<ProtectedRoute userRole={userRole} requiredRole=\"admin\" redirectPath=\"/auth/login\"><ClienteList /></ProtectedRoute>} />\r\n          <Route path=\"/suppliers\" element={<ProtectedRoute userRole={userRole} requiredRole=\"admin\" redirectPath=\"/auth/login\"><SupplierList /></ProtectedRoute>} />\r\n          <Route path=\"/products\" element={<ProtectedRoute userRole={userRole} requiredRole=\"admin\" redirectPath=\"/auth/login\"><ProductList /></ProtectedRoute>} />\r\n          <Route path=\"/sales-report\" element={<ProtectedRoute userRole={userRole} requiredRole=\"admin\" redirectPath=\"/auth/login\"><SalesReport /></ProtectedRoute>} />\r\n          <Route path=\"/purchase-report\" element={<ProtectedRoute userRole={userRole} requiredRole=\"admin\" redirectPath=\"/auth/login\"><PurchaseReport /></ProtectedRoute>} />\r\n\r\n          <Route path=\"*\" element={<h1>404 NOT FOUND</h1>} />\r\n        </Routes>\r\n      </AuthProvider>\r\n      <footer className=\"my-xxl-5 justify-content-end\">\r\n        <Link to=\"/\">\r\n          <button className=\"btn btn-outline-success\">üè† HOME</button>\r\n        </Link>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ProtectedRoute = ({ userRole, requiredRole = \"user\", redirectPath = \"/\", children }) => {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    console.log(\"Verificando rol del usuario en ProtectedRoute:\", userRole); \r\n    const token = localStorage.getItem('firebaseToken');\r\n\r\n    if (!token || (userRole && userRole !== requiredRole)) {\r\n      console.log(\"Redirigiendo a:\", redirectPath); \r\n      navigate(redirectPath);\r\n    }\r\n  }, [navigate, redirectPath, userRole, requiredRole]);\r\n\r\n  return children;\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}