{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'../service/axiosConfig';import Item from'../Item/Item';import ProductForm from'../ProductForm/ProductForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductList=()=>{const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[editProduct,setEditProduct]=useState(null);useEffect(()=>{fetchProducts();},[]);const fetchProducts=async()=>{try{setLoading(true);const response=await axios.get('/api/productos');console.log(\"Productos obtenidos:\",response.data);setProducts(response.data);}catch(error){console.error('Error al obtener los productos:',error);}finally{setLoading(false);}};const handleDeleteProduct=async id=>{try{console.log('Intentando eliminar producto con ID:',id);await axios.delete(\"/api/products/\".concat(id));setProducts(prevProducts=>prevProducts.filter(product=>product.id!==id));}catch(error){console.error('Error al eliminar el producto:',error);alert('Error al eliminar el producto. Por favor, inténtalo de nuevo.');}};const handleEditProduct=id=>{const productToEdit=products.find(product=>product.id===id);setEditProduct(productToEdit);};const handleUpdateProduct=async(id,updatedProduct)=>{try{setLoading(true);await axios.put(\"/api/products/\".concat(id),updatedProduct);setProducts(prevProducts=>prevProducts.map(product=>product.id===id?{...product,...updatedProduct}:product));setEditProduct(null);}catch(error){console.error('Error al actualizar el producto:',error);}finally{setLoading(false);}};const handleAddProduct=async newProduct=>{try{setLoading(true);const response=await axios.post('/api/products',newProduct);setProducts(prevProducts=>[...prevProducts,response.data]);}catch(error){console.error('Error al agregar el producto:',error);}finally{setLoading(false);}};const handleCancelEdit=()=>{setEditProduct(null);// Oculta el formulario de edición\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Lista de Productos\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap justify-content-around\",children:products.length>0?products.map(product=>/*#__PURE__*/_jsx(Item,{id:product.id,title:product.title,img:product.img,price:product.price,purchasePrice:product.purchasePrice,description:product.description,showEditButton:true,showDeleteButton:true,onEdit:handleEditProduct,onDelete:handleDeleteProduct,className:\"product-item\"},product.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No hay productos disponibles.\"})}),editProduct&&/*#__PURE__*/_jsx(ProductForm,{initialData:editProduct,onSave:updatedProduct=>handleUpdateProduct(editProduct.id,updatedProduct),onCancel:handleCancelEdit// Pasa la función para cancelar\n}),/*#__PURE__*/_jsx(ProductForm,{onSave:handleAddProduct})]});};export default ProductList;","map":{"version":3,"names":["React","useEffect","useState","axios","Item","ProductForm","jsx","_jsx","jsxs","_jsxs","ProductList","products","setProducts","loading","setLoading","editProduct","setEditProduct","fetchProducts","response","get","console","log","data","error","handleDeleteProduct","id","delete","concat","prevProducts","filter","product","alert","handleEditProduct","productToEdit","find","handleUpdateProduct","updatedProduct","put","map","handleAddProduct","newProduct","post","handleCancelEdit","className","children","length","title","img","price","purchasePrice","description","showEditButton","showDeleteButton","onEdit","onDelete","initialData","onSave","onCancel"],"sources":["C:/Users/guill/OneDrive/Documents/UADE/TP/equipo1-ecommerce/equipo1-ecommerce/src/components/ProductList/ProductList.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from '../service/axiosConfig';\r\nimport Item from '../Item/Item';\r\nimport ProductForm from '../ProductForm/ProductForm';\r\n\r\nconst ProductList = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editProduct, setEditProduct] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  const fetchProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get('/api/productos');\r\n      console.log(\"Productos obtenidos:\", response.data);\r\n      setProducts(response.data);\r\n    } catch (error) {\r\n      console.error('Error al obtener los productos:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteProduct = async (id) => {\r\n    try {\r\n      console.log('Intentando eliminar producto con ID:', id);\r\n      await axios.delete(`/api/products/${id}`);\r\n      setProducts((prevProducts) => prevProducts.filter((product) => product.id !== id));\r\n    } catch (error) {\r\n      console.error('Error al eliminar el producto:', error);\r\n      alert('Error al eliminar el producto. Por favor, inténtalo de nuevo.');\r\n    }\r\n  };\r\n\r\n  const handleEditProduct = (id) => {\r\n    const productToEdit = products.find((product) => product.id === id);\r\n    setEditProduct(productToEdit);\r\n  };\r\n\r\n  const handleUpdateProduct = async (id, updatedProduct) => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.put(`/api/products/${id}`, updatedProduct);\r\n      setProducts((prevProducts) =>\r\n        prevProducts.map((product) => (product.id === id ? { ...product, ...updatedProduct } : product))\r\n      );\r\n      setEditProduct(null);\r\n    } catch (error) {\r\n      console.error('Error al actualizar el producto:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAddProduct = async (newProduct) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.post('/api/products', newProduct);\r\n      setProducts((prevProducts) => [...prevProducts, response.data]);\r\n    } catch (error) {\r\n      console.error('Error al agregar el producto:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setEditProduct(null); // Oculta el formulario de edición\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-list-container\">\r\n      <h2>Lista de Productos</h2>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : (\r\n        <div className=\"d-flex flex-wrap justify-content-around\">\r\n          {products.length > 0 ? (\r\n            products.map((product) => (\r\n              <Item\r\n                key={product.id}\r\n                id={product.id}\r\n                title={product.title}\r\n                img={product.img}\r\n                price={product.price}\r\n                purchasePrice={product.purchasePrice}\r\n                description={product.description}\r\n                showEditButton={true}\r\n                showDeleteButton={true}\r\n                onEdit={handleEditProduct}\r\n                onDelete={handleDeleteProduct}\r\n                className=\"product-item\"\r\n              />\r\n            ))\r\n          ) : (\r\n            <p>No hay productos disponibles.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n      {editProduct && (\r\n        <ProductForm\r\n          initialData={editProduct}\r\n          onSave={(updatedProduct) => handleUpdateProduct(editProduct.id, updatedProduct)}\r\n          onCancel={handleCancelEdit} // Pasa la función para cancelar\r\n        />\r\n      )}\r\n      <ProductForm onSave={handleAddProduct} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}